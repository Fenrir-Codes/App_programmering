package dk.tec.jaj.example3;

import java.io.PrintWriter;
import java.sql.*;

import dk.tec.jaj.Elev;

public class DBTools {
	
	Connection con;
	Statement stmt;
	ResultSet result;
	
	//(LocalDb)\\MSSQLLocalDB
	String connectionString = "jdbc:sqlserver://localhost; databaseName=MyApiDB;encrypt=true;trustServerCertificate=true";
	
	private void Connect() {
		try {
			//System.out.print("live");
			Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
			//System.out.print("getconn");
			con = DriverManager.getConnection(connectionString,"sa", "Passw0rd");
			//System.out.print("createstate");
			stmt = con.createStatement();
			//System.out.print("live");
			
		} catch (ClassNotFoundException e) {
			e.printStackTrace();
		} catch (SQLException e) {
			e.printStackTrace();
		}
	}

	public Elev getElevById(int id) {
		Connect();
		String sqlString = "Select * from Elev where id=" +id;
		
		Elev elev = new Elev();
		
		try {			
			result = stmt.executeQuery(sqlString);
			
			if(result.next()) {
				elev.setId(result.getInt("Id"));
				elev.setName(result.getString("Name"));
				elev.setAge(result.getInt("Age"));
				elev.setJob(result.getString("Job"));
			}		
			
		} catch (SQLException e) {
			e.printStackTrace();
		}
		return elev;
	}
	
	public Elev getAllElev() {
		Connect();
		String sqlString = "Select * from Elev";
		return null;
	}
}
